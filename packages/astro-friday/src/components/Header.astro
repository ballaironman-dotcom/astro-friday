---
import config from 'virtual:astro-friday-config'
import Logo from '../assets/favicon.svg'
import { getPath } from '../utils/path'
import ThemeToggle from './ThemeToggle.astro'

---

<header class="p-2rem flex gap-1.2rem items-center relative">
  <a
    href={getPath('home')}
    class="hoverable-text size-2.5rem absolute"
    style={{
      backgroundSize: 'contain',
      backgroundRepeat: 'no-repeat',
      backgroundPosition: 'center',
      backgroundImage: `url(${config?.logo?.url || Logo.src})`,
    }}
  />

  <i class="flex-1"></i>

  <nav>
    <ul class="gap-1.2rem grid grid-flow-col">
      {Object.entries(config.navigations).map(([key, item]) => {
        if (key === 'theme-toggle') {
          return (<li style={{ order: config.navigations['theme-toggle']!.order }}><ThemeToggle /></li>)
        }
        return (
          <li
            style={{
              order: item.order ?? 0,
              display: item.hidden ? 'none' : undefined,
            }}
          >
            <a
              href={item.link}
              target={item.external ? '_blank' : '_self'}
              class="hoverable-text"
            >
              {
                item.type === 'icon' && item.icon
                ? (
                    <i class={`${item.icon}`}></i>
                  )
                : (
                    <>
                      <span class="lt-md:hidden">{item.label}</span>
                      {item.icon && <i class={`${item.icon} md:hidden`}></i>}
                    </>
                  )
              }
            </a>
          </li>
        )
      })}
    </ul>
  </nav>

</header>
