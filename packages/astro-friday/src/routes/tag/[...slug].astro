---
import ArticleList from '../../components/ArticleList.astro'
import DefaultLayout from '../../layouts/Default.astro'
import { getPostList } from '../../utils/content/post'


export async function getStaticPaths() {
  const tagInfos = await getPostList({
    groupBy: 'tag',
  })

  return Array.from(tagInfos.entries()).map(([tag, entryList]) => ({
    params: {
      slug: tag,
    },
    props: {
      entryList,
    },
  }))
}

const {
  slug,
} = Astro.params

const { entryList } = Astro.props

---

<DefaultLayout>
  <p class="text-2xl mx-auto mb-4 op-60 flex gap-2 items-center justify-start prose">
    <i class="i-lucide:tag"></i>
    <span>{slug}</span>
  </p>

  <ArticleList {entryList} />
</DefaultLayout>
